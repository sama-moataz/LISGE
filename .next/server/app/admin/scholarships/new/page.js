(()=>{var e={};e.id=371,e.ids=[371],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15079:(e,a,r)=>{"use strict";r.d(a,{bq:()=>h,eb:()=>v,gC:()=>g,l6:()=>c,yv:()=>u});var l=r(60687),i=r(43210),t=r(91413),s=r(61662),n=r(89743),o=r(58450),d=r(4780);let c=t.bL;t.YJ;let u=t.WT,h=i.forwardRef(({className:e,children:a,...r},i)=>(0,l.jsxs)(t.l9,{ref:i,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[a,(0,l.jsx)(t.In,{asChild:!0,children:(0,l.jsx)(s.A,{className:"h-4 w-4 opacity-50"})})]}));h.displayName=t.l9.displayName;let m=i.forwardRef(({className:e,...a},r)=>(0,l.jsx)(t.PP,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,l.jsx)(n.A,{className:"h-4 w-4"})}));m.displayName=t.PP.displayName;let p=i.forwardRef(({className:e,...a},r)=>(0,l.jsx)(t.wn,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,l.jsx)(s.A,{className:"h-4 w-4"})}));p.displayName=t.wn.displayName;let g=i.forwardRef(({className:e,children:a,position:r="popper",...i},s)=>(0,l.jsx)(t.ZL,{children:(0,l.jsxs)(t.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[(0,l.jsx)(m,{}),(0,l.jsx)(t.LM,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,l.jsx)(p,{})]})}));g.displayName=t.UC.displayName,i.forwardRef(({className:e,...a},r)=>(0,l.jsx)(t.JU,{ref:r,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=t.JU.displayName;let v=i.forwardRef(({className:e,children:a,...r},i)=>(0,l.jsxs)(t.q7,{ref:i,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(t.VF,{children:(0,l.jsx)(o.A,{className:"h-4 w-4"})})}),(0,l.jsx)(t.p4,{children:a})]}));v.displayName=t.q7.displayName,i.forwardRef(({className:e,...a},r)=>(0,l.jsx)(t.wv,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=t.wv.displayName},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},20527:(e,a,r)=>{"use strict";r.a(e,async(e,l)=>{try{r.r(a),r.d(a,{"404faad4109717d4e5e86c4fbf403198de204c6c72":()=>i.cz,"604c5160916e78886692ed32262a86353fa2a109f9":()=>i.a3,"605695a45e6daa71c71a0b803c33975c451c8a3ad9":()=>i.yw});var i=r(84231),t=e([i]);i=(t.then?(await t)():t)[0],l()}catch(e){l(e)}})},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29320:(e,a,r)=>{Promise.resolve().then(r.bind(r,42224))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34729:(e,a,r)=>{"use strict";r.d(a,{T:()=>s});var l=r(60687),i=r(43210),t=r(4780);let s=i.forwardRef(({className:e,...a},r)=>(0,l.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...a}));s.displayName="Textarea"},37366:e=>{"use strict";e.exports=require("dns")},41163:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>l});let l=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/admin/scholarships/new/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/admin/scholarships/new/page.tsx","default")},42224:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>D});var l=r(60687),i=r(43210),t=r(16189),s=r(27605),n=r(63442),o=r(45880),d=r(18780),c=r(29523),u=r(44493),h=r(89667),m=r(80013),p=r(34729),g=r(15079),v=r(11516),x=r(69678),f=r(55817),b=r(71273),A=r(29867),j=r(85814),S=r.n(j),y=r(6475);let N=(0,y.createServerReference)("404faad4109717d4e5e86c4fbf403198de204c6c72",y.callServer,void 0,y.findSourceMapURL,"handleAddScholarshipAction"),C=["Award","Book","BookOpen","Briefcase","Building","CalendarDays","CheckCircle","ClipboardList","Coins","Compass","DollarSign","Edit3","ExternalLink","Feather","FileText","Filter","Flag","FolderOpen","Gift","Globe","GraduationCap","HeartHandshake","HelpCircle","Home","Image","Info","Landmark","Languages","Laptop","LayoutDashboard","Library","LifeBuoy","Lightbulb","Link","ListChecks","Loader2","LockKeyhole","LogIn","LogOut","Mail","Map","MapPin","Medal","Menu","MessageSquare","Mic2","Moon","MoreHorizontal","MousePointerSquare","Move","Music2","Newspaper","Package","Paperclip","PenLine","Percent","PersonStanding","Phone","PieChart","Pin","PlayCircle","Plus","PlusCircle","Pocket","Printer","Puzzle","RefreshCcw","RefreshCw","Rocket","Save","School","ScreenShare","Search","Send","Settings","Settings2","Share2","Sheet","ShieldCheck","ShoppingBag","ShoppingCart","SlidersHorizontal","Smile","Sparkles","Speaker","Star","StickyNote","Sun","Table","Tablet","Tag","Target","Tent","ThumbsUp","Timer","ToggleLeft","ToggleRight","Tool","Trash2","TrendingUp","Trophy","Truck","Tv2","University","UploadCloud","User","UserCheck","UserCog","UserPlus","Users","Video","Voicemail","WalletCards","Waypoints","Wifi","Wind","Workflow","Youtube","Zap"],L=[{value:"Egypt",label:"Egypt"},{value:"International",label:"International"},{value:"Global",label:"Global"},{value:"Online",label:"Online"}],w=[{value:"All",label:"All Ages/Grades"},{value:"Under 16",label:"Under 16"},{value:"16-18",label:"16-18"},{value:"18+",label:"18+"}],R=[{value:"All",label:"All Funding Levels"},{value:"Fully Funded",label:"Fully Funded"},{value:"Partial Scholarship",label:"Partial Scholarship"},{value:"No Funding",label:"No Funding"},{value:"Varies",label:"Varies"}],E=[{value:"All",label:"All Destinations"},{value:"Egypt/MENA",label:"Egypt/MENA"},{value:"USA",label:"USA"},{value:"Europe",label:"Europe"},{value:"UK",label:"UK"},{value:"Canada",label:"Canada"},{value:"Asia",label:"Asia"},{value:"Global",label:"Global (Multiple/Any)"},{value:"Other",label:"Other"}],I=[{value:"All",label:"All Levels/Types"},{value:"High School",label:"High School Program"},{value:"Undergraduate",label:"Undergraduate Degree"},{value:"Postgraduate",label:"Postgraduate Degree"},{value:"Language",label:"Language Course"},{value:"Exchange",label:"Exchange Program"},{value:"Research",label:"Research Grant/Fellowship"},{value:"Youth",label:"Youth Program"},{value:"Varies",label:"Varies/Other"}],T=[{value:"All",label:"All Funding Countries"},{value:"Egypt",label:"Egypt"},{value:"USA",label:"USA"},{value:"Germany",label:"Germany"},{value:"UK",label:"UK"},{value:"Canada",label:"Canada"},{value:"China",label:"China"},{value:"South Korea",label:"South Korea"},{value:"Other",label:"Other"}],_=o.Ik({name:o.Yj().min(3,{message:"Name must be at least 3 characters."}),description:o.Yj().min(10,{message:"Description must be at least 10 characters."}),eligibility:o.Yj().min(10,{message:"Eligibility criteria must be at least 10 characters."}),websiteUrl:o.Yj().url({message:"Please enter a valid URL."}),iconName:o.Yj().optional().nullable(),category:o.Yj().optional().nullable(),location:o.k5(["Egypt","International","Global","Online"]),ageRequirement:o.Yj().optional().nullable(),fundingLevel:o.Yj().optional().nullable(),destinationRegion:o.Yj().optional().nullable(),targetLevel:o.Yj().optional().nullable(),fundingCountry:o.Yj().optional().nullable(),partner:o.Yj().optional().nullable(),coverage:o.Yj().optional().nullable(),deadline:o.Yj().optional().nullable(),imageUrl:o.Yj().url({message:"Please enter a valid image URL."}).or(o.eu("")).optional().nullable()});function D(){let{user:e,isAdmin:a,loading:r}=(0,d.A)(),o=(0,t.useRouter)(),{toast:j}=(0,A.dj)(),[y,D]=(0,i.useState)(!1),{control:P,handleSubmit:F,formState:{errors:O}}=(0,s.mN)({resolver:(0,n.u)(_),defaultValues:{name:"",description:"",eligibility:"",websiteUrl:"",iconName:null,category:null,location:"International",ageRequirement:null,fundingLevel:null,destinationRegion:null,targetLevel:null,fundingCountry:null,partner:null,coverage:null,deadline:null,imageUrl:null}}),U=async e=>{D(!0),console.log("[NewScholarshipPage Client] Submitting form data to Server Action:",e);let a={...e,iconName:"_none_"===e.iconName?null:e.iconName,ageRequirement:"_none_"===e.ageRequirement?null:e.ageRequirement||null,fundingLevel:"_none_"===e.fundingLevel?null:e.fundingLevel||null,destinationRegion:"_none_"===e.destinationRegion?null:e.destinationRegion||null,targetLevel:"_none_"===e.targetLevel?null:e.targetLevel||null,fundingCountry:"_none_"===e.fundingCountry?null:e.fundingCountry||null,imageUrl:""===e.imageUrl?null:e.imageUrl,category:e.category||null,partner:e.partner||null,coverage:e.coverage||null,deadline:e.deadline||null};console.log("[Server Action - handleAddScholarship] GOOGLE_APPLICATION_CREDENTIALS (at start of Server Action):",process.env.GOOGLE_APPLICATION_CREDENTIALS||"NOT SET in Server Action environment");let r=await N(a);r.success?(j({title:"Success",description:`Scholarship "${r.name}" added successfully with ID: ${r.scholarshipId}.`}),o.push("/admin/scholarships")):(j({title:"Error Adding Scholarship",description:r.error||"Failed to add scholarship. Check server console for details.",variant:"destructive"}),console.error("[NewScholarshipPage Client] Error from Server Action 'handleAddScholarshipAction':",r.error)),D(!1)};return r?(0,l.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-200px)]",children:(0,l.jsx)(v.A,{className:"h-12 w-12 animate-spin text-primary"})}):a||r?(0,l.jsxs)("div",{className:"space-y-6 max-w-3xl mx-auto",children:[(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsx)(c.$,{variant:"outline",size:"sm",asChild:!0,children:(0,l.jsxs)(S(),{href:"/admin/scholarships",children:[(0,l.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Back to Scholarships"]})})}),(0,l.jsxs)(u.Zp,{children:[(0,l.jsxs)(u.aR,{children:[(0,l.jsx)(u.ZB,{className:"text-2xl font-headline",children:"Add New Scholarship (Admin SDK)"}),(0,l.jsx)(u.BT,{children:"Fill in the details for the new scholarship listing."})]}),(0,l.jsx)(u.Wu,{children:(0,l.jsxs)("form",{onSubmit:F(U),className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)(m.Label,{htmlFor:"name",children:["Scholarship Name ",(0,l.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,l.jsx)(s.xI,{name:"name",control:P,render:({field:e})=>(0,l.jsx)(h.p,{id:"name",...e,placeholder:"E.g., Future Leaders Scholarship"})}),O.name&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.name.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(m.Label,{htmlFor:"description",children:["Description ",(0,l.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,l.jsx)(s.xI,{name:"description",control:P,render:({field:e})=>(0,l.jsx)(p.T,{id:"description",...e,placeholder:"Detailed description of the scholarship..."})}),O.description&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.description.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(m.Label,{htmlFor:"eligibility",children:["Eligibility Criteria ",(0,l.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,l.jsx)(s.xI,{name:"eligibility",control:P,render:({field:e})=>(0,l.jsx)(p.T,{id:"eligibility",...e,placeholder:"Who is eligible for this scholarship?"})}),O.eligibility&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.eligibility.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(m.Label,{htmlFor:"websiteUrl",children:["Website URL ",(0,l.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,l.jsx)(s.xI,{name:"websiteUrl",control:P,render:({field:e})=>(0,l.jsx)(h.p,{id:"websiteUrl",...e,placeholder:"https://example.com/scholarship"})}),O.websiteUrl&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.websiteUrl.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"imageUrl",children:"Image URL"}),(0,l.jsx)(s.xI,{name:"imageUrl",control:P,render:({field:e})=>(0,l.jsx)(h.p,{id:"imageUrl",...e,value:e.value??"",placeholder:"https://example.com/image.jpg"})}),O.imageUrl&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.imageUrl.message})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"iconName",children:"Icon Name (Lucide)"}),(0,l.jsx)(s.xI,{name:"iconName",control:P,render:({field:e})=>(0,l.jsxs)(g.l6,{onValueChange:e.onChange,value:e.value??void 0,defaultValue:e.value??void 0,children:[(0,l.jsx)(g.bq,{id:"iconName",children:(0,l.jsx)(g.yv,{placeholder:"Select an icon (optional)"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"_none_",children:"None"}),C.map(e=>(0,l.jsx)(g.eb,{value:e,children:e},e))]})]})}),O.iconName&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.iconName.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"category",children:"Category"}),(0,l.jsx)(s.xI,{name:"category",control:P,render:({field:e})=>(0,l.jsx)(h.p,{id:"category",...e,value:e.value??"",placeholder:"E.g., STEM, Arts, Leadership"})}),O.category&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.category.message})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)(m.Label,{htmlFor:"location",children:["Location ",(0,l.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,l.jsx)(s.xI,{name:"location",control:P,render:({field:e})=>(0,l.jsxs)(g.l6,{onValueChange:e.onChange,value:e.value,defaultValue:e.value,children:[(0,l.jsx)(g.bq,{id:"location",children:(0,l.jsx)(g.yv,{placeholder:"Select location"})}),(0,l.jsx)(g.gC,{children:L.map(e=>(0,l.jsx)(g.eb,{value:e.value,children:e.label},e.value))})]})}),O.location&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.location.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"ageRequirement",children:"Age/Grade Requirement"}),(0,l.jsx)(s.xI,{name:"ageRequirement",control:P,render:({field:e})=>(0,l.jsxs)(g.l6,{onValueChange:e.onChange,value:e.value??void 0,defaultValue:e.value??void 0,children:[(0,l.jsx)(g.bq,{id:"ageRequirement",children:(0,l.jsx)(g.yv,{placeholder:"Select age/grade"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"_none_",children:"N/A or Not Specified"}),w.map(e=>(0,l.jsx)(g.eb,{value:e.value,children:e.label},e.value))]})]})}),O.ageRequirement&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.ageRequirement.message})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"fundingLevel",children:"Funding Level"}),(0,l.jsx)(s.xI,{name:"fundingLevel",control:P,render:({field:e})=>(0,l.jsxs)(g.l6,{onValueChange:e.onChange,value:e.value??void 0,defaultValue:e.value??void 0,children:[(0,l.jsx)(g.bq,{id:"fundingLevel",children:(0,l.jsx)(g.yv,{placeholder:"Select funding level"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"_none_",children:"N/A or Not Specified"}),R.map(e=>(0,l.jsx)(g.eb,{value:e.value,children:e.label},e.value))]})]})}),O.fundingLevel&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.fundingLevel.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"destinationRegion",children:"Destination Region"}),(0,l.jsx)(s.xI,{name:"destinationRegion",control:P,render:({field:e})=>(0,l.jsxs)(g.l6,{onValueChange:e.onChange,value:e.value??void 0,defaultValue:e.value??void 0,children:[(0,l.jsx)(g.bq,{id:"destinationRegion",children:(0,l.jsx)(g.yv,{placeholder:"Select destination region"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"_none_",children:"N/A or Not Specified"}),E.map(e=>(0,l.jsx)(g.eb,{value:e.value,children:e.label},e.value))]})]})}),O.destinationRegion&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.destinationRegion.message})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"targetLevel",children:"Target Level/Type"}),(0,l.jsx)(s.xI,{name:"targetLevel",control:P,render:({field:e})=>(0,l.jsxs)(g.l6,{onValueChange:e.onChange,value:e.value??void 0,defaultValue:e.value??void 0,children:[(0,l.jsx)(g.bq,{id:"targetLevel",children:(0,l.jsx)(g.yv,{placeholder:"Select target level"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"_none_",children:"N/A or Not Specified"}),I.map(e=>(0,l.jsx)(g.eb,{value:e.value,children:e.label},e.value))]})]})}),O.targetLevel&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.targetLevel.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"fundingCountry",children:"Funding Country"}),(0,l.jsx)(s.xI,{name:"fundingCountry",control:P,render:({field:e})=>(0,l.jsxs)(g.l6,{onValueChange:e.onChange,value:e.value??void 0,defaultValue:e.value??void 0,children:[(0,l.jsx)(g.bq,{id:"fundingCountry",children:(0,l.jsx)(g.yv,{placeholder:"Select funding country"})}),(0,l.jsxs)(g.gC,{children:[(0,l.jsx)(g.eb,{value:"_none_",children:"N/A or Not Specified"}),T.map(e=>(0,l.jsx)(g.eb,{value:e.value,children:e.label},e.value))]})]})}),O.fundingCountry&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.fundingCountry.message})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"partner",children:"Partner/Provider"}),(0,l.jsx)(s.xI,{name:"partner",control:P,render:({field:e})=>(0,l.jsx)(h.p,{id:"partner",...e,value:e.value??"",placeholder:"E.g., University Name, Organization"})}),O.partner&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.partner.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"coverage",children:"Coverage Details"}),(0,l.jsx)(s.xI,{name:"coverage",control:P,render:({field:e})=>(0,l.jsx)(p.T,{id:"coverage",...e,value:e.value??"",placeholder:"What does the scholarship cover? (Tuition, accommodation, etc.)"})}),O.coverage&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.coverage.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Label,{htmlFor:"deadline",children:"Application Deadline"}),(0,l.jsx)(s.xI,{name:"deadline",control:P,render:({field:e})=>(0,l.jsx)(h.p,{id:"deadline",...e,value:e.value??"",placeholder:"E.g., December 31st, Rolling Basis"})}),O.deadline&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.deadline.message})]}),(0,l.jsxs)(c.$,{type:"submit",className:"w-full",disabled:y||r,children:[y?(0,l.jsx)(v.A,{className:"animate-spin mr-2"}):(0,l.jsx)(b.A,{className:"mr-2 h-5 w-5"}),"Add Scholarship"]})]})})]})]}):(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-[calc(100vh-200px)] text-center p-4",children:[(0,l.jsx)(x.A,{className:"h-16 w-16 text-destructive mb-4"}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-destructive mb-2",children:"Access Denied"}),(0,l.jsx)("p",{className:"text-muted-foreground mb-6",children:"You do not have permission to perform this action."}),(0,l.jsx)(c.$,{onClick:()=>o.push("/dashboard"),children:"Go to Dashboard"})]})}},42472:(e,a,r)=>{Promise.resolve().then(r.bind(r,41163))},44493:(e,a,r)=>{"use strict";r.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>s,aR:()=>n,wL:()=>u});var l=r(60687),i=r(43210),t=r(4780);let s=i.forwardRef(({className:e,...a},r)=>(0,l.jsx)("div",{ref:r,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));s.displayName="Card";let n=i.forwardRef(({className:e,...a},r)=>(0,l.jsx)("div",{ref:r,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let o=i.forwardRef(({className:e,...a},r)=>(0,l.jsx)("div",{ref:r,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));o.displayName="CardTitle";let d=i.forwardRef(({className:e,...a},r)=>(0,l.jsx)("div",{ref:r,className:(0,t.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let c=i.forwardRef(({className:e,...a},r)=>(0,l.jsx)("div",{ref:r,className:(0,t.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent";let u=i.forwardRef(({className:e,...a},r)=>(0,l.jsx)("div",{ref:r,className:(0,t.cn)("flex items-center p-6 pt-0",e),...a}));u.displayName="CardFooter"},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>i});var l=r(31658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,l.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},76409:(e,a,r)=>{"use strict";r.a(e,async(e,l)=>{try{r.d(a,{Kr:()=>d,LF:()=>c,r6:()=>o});var i=r(87915),t=r(7879),s=e([t]);t=(s.then?(await s)():s)[0];let u="SCHOLARSHIPS";function n(){if(void 0===i.s||!i.s||"function"!=typeof i.s.collection){let e="SERVER_CONFIG_ERROR: Firebase Admin SDK (adminDB) is not properly initialized. This is a critical server configuration issue. Possible causes: GOOGLE_APPLICATION_CREDENTIALS environment variable is not set, path is incorrect, service account file is malformed/missing, or Node.js process lacks read permissions. Detailed Admin SDK initialization logs should be in the server console (check firebaseAdmin.ts logs).";throw console.error("[firestoreAdminService] CRITICAL CHECK FAILED:",e),Error(e)}console.log("[firestoreAdminService] AdminDB initialized check passed.")}async function o(e){console.log("[firestoreAdminService] addScholarshipAdmin: Attempting to add data:",JSON.stringify(e,null,2)),n();let a={name:e.name||"",description:e.description||"",eligibility:e.eligibility||"",websiteUrl:e.websiteUrl||"",location:e.location||"International",iconName:e.iconName&&"_none_"!==e.iconName?e.iconName:null,category:e.category||null,ageRequirement:e.ageRequirement&&"_none_"!==e.ageRequirement?e.ageRequirement:null,fundingLevel:e.fundingLevel&&"_none_"!==e.fundingLevel?e.fundingLevel:null,destinationRegion:e.destinationRegion&&"_none_"!==e.destinationRegion?e.destinationRegion:null,targetLevel:e.targetLevel&&"_none_"!==e.targetLevel?e.targetLevel:null,fundingCountry:e.fundingCountry&&"_none_"!==e.fundingCountry?e.fundingCountry:null,partner:e.partner||null,coverage:e.coverage||null,deadline:e.deadline||null,imageUrl:e.imageUrl||null,createdAt:t.Timestamp.now(),updatedAt:t.Timestamp.now()};try{let e=i.s.collection(u),r=await e.add(a);return console.log("[firestoreAdminService] addScholarshipAdmin: Successfully added document with ID:",r.id),r.id}catch(e){throw console.error("[firestoreAdminService] addScholarshipAdmin: CRITICAL ERROR during Admin SDK Firestore 'add' operation:",e),Error(`Admin SDK Firestore Error: ${e.message||"Failed to add scholarship using Admin SDK. Check server console for details."}`)}}async function d(e,a){console.log(`[firestoreAdminService] updateScholarshipAdmin: Attempting to update ID ${e} with data:`,JSON.stringify(a,null,2)),n();let r={};Object.keys(a).forEach(e=>{let l=a[e];null==l||"_none_"===l||"string"==typeof l&&""===l.trim()&&("imageUrl"===e||"iconName"===e||"category"===e||"ageRequirement"===e||"fundingLevel"===e||"destinationRegion"===e||"targetLevel"===e||"fundingCountry"===e||"partner"===e||"coverage"===e||"deadline"===e)?r[e]=null:r[e]=l}),r.updatedAt=t.Timestamp.now();try{let a=i.s.collection(u).doc(e);await a.update(r),console.log(`[firestoreAdminService] updateScholarshipAdmin: Successfully updated document with ID: ${e}`)}catch(a){throw console.error(`[firestoreAdminService] updateScholarshipAdmin: ERROR updating scholarship ${e} with Admin SDK:`,a),Error(`Admin SDK Firestore Error: ${a.message||`Failed to update scholarship ${e}. Check server console.`}`)}}async function c(e){console.log(`[firestoreAdminService] deleteScholarshipAdmin: Attempting to delete ID: ${e}`),n();try{let a=i.s.collection(u).doc(e);await a.delete(),console.log(`[firestoreAdminService] deleteScholarshipAdmin: Successfully deleted document with ID: ${e}`)}catch(a){throw console.error(`[firestoreAdminService] deleteScholarshipAdmin: Error deleting scholarship ${e} with Admin SDK:`,a),Error(`Admin SDK Firestore Error: ${a.message||`Failed to delete scholarship ${e}. Check server console.`}`)}}l()}catch(e){l(e)}})},76704:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>s.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var l=r(65239),i=r(48088),t=r(88170),s=r.n(t),n=r(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(a,o);let d={children:["",{children:["admin",{children:["scholarships",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,41163)),"/home/user/studio/src/app/admin/scholarships/new/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,80871)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/admin/scholarships/new/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new l.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/scholarships/new/page",pathname:"/admin/scholarships/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79551:e=>{"use strict";e.exports=require("url")},80013:(e,a,r)=>{"use strict";r.d(a,{Label:()=>d});var l=r(60687),i=r(43210),t=r(78148),s=r(24224),n=r(4780);let o=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(({className:e,...a},r)=>(0,l.jsx)(t.b,{ref:r,className:(0,n.cn)(o(),e),...a}));d.displayName=t.b.displayName},81630:e=>{"use strict";e.exports=require("http")},84231:(e,a,r)=>{"use strict";r.a(e,async(e,l)=>{try{r.d(a,{a3:()=>c,cz:()=>o,yw:()=>d});var i=r(91199);r(42087);var t=r(76409),s=r(33331),n=e([t]);async function o(e){console.log("[Server Action - handleAddScholarshipAction] INVOKED."),console.log("[Server Action - handleAddScholarshipAction] GOOGLE_APPLICATION_CREDENTIALS (at start of Server Action):",process.env.GOOGLE_APPLICATION_CREDENTIALS||"NOT SET in Server Action environment");try{console.log("[Server Action - handleAddScholarshipAction] Received processed data:",JSON.stringify(e,null,2));let a=await (0,t.r6)(e);return console.log("[Server Action - handleAddScholarshipAction] Scholarship added successfully with ID:",a),{success:!0,scholarshipId:a,name:e.name}}catch(r){console.error("[Server Action - handleAddScholarshipAction] CAUGHT ERROR while calling addScholarshipAdmin or during processing:",r),console.error("[Server Action - handleAddScholarshipAction] Error Name:",r.name),console.error("[Server Action - handleAddScholarshipAction] Error Message:",r.message),console.error("[Server Action - handleAddScholarshipAction] Error Stack:",r.stack);let a="Failed to add scholarship. An unexpected server error occurred.";return r.message&&(a=r.message.includes("SERVER_CONFIG_ERROR:")?r.message:`Failed to add scholarship: ${r.message}`),{success:!1,error:a,name:e.name}}}async function d(e,a){console.log(`[Server Action - handleUpdateScholarshipAction] Received data for ID ${e}:`,a);try{return console.log("[Server Action - handleUpdateScholarshipAction] Processed data for Admin SDK:",a),await (0,t.Kr)(e,a),console.log("[Server Action - handleUpdateScholarshipAction] Scholarship updated for ID:",e),{success:!0,id:e,name:a.name}}catch(e){return console.error("[Server Action - handleUpdateScholarshipAction] Error calling updateScholarshipAdmin:",e),{success:!1,error:e.message||"Failed to update scholarship via Admin SDK.",name:a.name}}}async function c(e,a){console.log(`[Server Action - handleDeleteScholarshipAction] Attempting to delete ID ${e}, Name: ${a}`);try{return await (0,t.LF)(e),console.log(`[Server Action - handleDeleteScholarshipAction] Scholarship deleted for ID: ${e}`),{success:!0,name:a}}catch(r){return console.error(`[Server Action - handleDeleteScholarshipAction] Error calling deleteScholarshipAdmin for ID ${e}:`,r),{success:!1,error:r.message||"Failed to delete scholarship via Admin SDK.",name:a}}}t=(n.then?(await n)():n)[0],(0,s.D)([o,d,c]),(0,i.A)(o,"404faad4109717d4e5e86c4fbf403198de204c6c72",null),(0,i.A)(d,"605695a45e6daa71c71a0b803c33975c451c8a3ad9",null),(0,i.A)(c,"604c5160916e78886692ed32262a86353fa2a109f9",null),l()}catch(e){l(e)}})},87915:(e,a,r)=>{"use strict";let l,i;r.d(a,{s:()=>o});let t=require("firebase-admin");var s=r.n(t);console.log("[firebaseAdmin.ts] SERVER START: Current value of process.env.GOOGLE_APPLICATION_CREDENTIALS:",process.env.GOOGLE_APPLICATION_CREDENTIALS||"NOT SET");let n=process.env.GOOGLE_APPLICATION_CREDENTIALS;if(s().apps.length){console.log("Firebase Admin SDK: Already initialized (admin.apps.length > 0). Retrieving existing instances.");try{l||(l=s().firestore()),i||(i=s().auth()),l&&i&&console.log("Firebase Admin SDK: Re-confirmed Firestore and Auth instances from existing app.")}catch(e){console.error("Firebase Admin SDK: Error retrieving instances from existing app:",e.message)}}else{if(n){console.log("Firebase Admin SDK: GOOGLE_APPLICATION_CREDENTIALS is SET. Path from env var:",n);try{s().initializeApp({credential:s().credential.cert(n)}),console.log("Firebase Admin SDK: Initialized successfully with service account from path:",n)}catch(e){console.error("Firebase Admin SDK: CRITICAL - Initialization FAILED with service account. Path used:",n,"Error:",e.message),console.error("Firebase Admin SDK: Ensure the GOOGLE_APPLICATION_CREDENTIALS path is correct, the file exists, is valid JSON, and the Node.js process has read permissions.")}}else{console.warn("WARNING: GOOGLE_APPLICATION_CREDENTIALS environment variable is NOT SET. Firebase Admin SDK will attempt to initialize with application default credentials. This might only work in specific Google Cloud environments (e.g., Cloud Functions, App Engine). For local development and most other deployments, you MUST provide a service account JSON file path via this variable.");try{s().initializeApp(),console.log("Firebase Admin SDK: Initialized with application default credentials.")}catch(e){console.error("Firebase Admin SDK: CRITICAL - Initialization FAILED with default credentials:",e.message),console.error("Firebase Admin SDK: Ensure your environment is set up for default credentials or set GOOGLE_APPLICATION_CREDENTIALS.")}}if(s().apps.length>0)try{l=s().firestore(),i=s().auth(),l&&i?console.log("Firebase Admin SDK: Successfully retrieved Firestore and Auth instances. Admin SDK should be operational."):console.error("Firebase Admin SDK: CRITICAL - admin.firestore() or admin.auth() returned undefined/null even after app initialization. This is unexpected.")}catch(e){console.error("Firebase Admin SDK: CRITICAL - Error when trying to get Firestore/Auth instance after app initialization:",e.message)}else console.error("Firebase Admin SDK: CRITICAL - admin.apps.length is 0. Initialization definitely failed.")}let o=l},89667:(e,a,r)=>{"use strict";r.d(a,{p:()=>s});var l=r(60687),i=r(43210),t=r(4780);let s=i.forwardRef(({className:e,type:a,...r},i)=>(0,l.jsx)("input",{type:a,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...r}));s.displayName="Input"},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var a=require("../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),l=a.X(0,[447,482,658,46,149,455,973],()=>r(76704));module.exports=l})();